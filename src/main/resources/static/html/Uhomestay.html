<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<link href="../bootstrap-4.3.1-dist/css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="http://cdn.bootcss.com/bootstrap-daterangepicker/2.1.25/daterangepicker.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<link href="http://at.alicdn.com/t/font_1216890_h64jhyxvtj8.css"  rel="stylesheet">

<script src="../js/jquery-3.3.1.min.js"></script>
<script src="http://code.changer.hk/jquery/plugins/jquery.cookie.js"></script>
<script src="../bootstrap-4.3.1-dist/js/bootstrap.js"></script>
<script src="http://cdn.bootcss.com/bootstrap-daterangepicker/2.1.25/moment.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap-daterangepicker/2.1.25/daterangepicker.js"></script>

<body>
<div class="bg-light">
    <div class="row">
        <div class="col-md-12">
            <nav class="navbar navbar-expand-lg navbar-light bg-white">

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="navbar-toggler-icon"></span>
                </button> <a class="navbar-brand" href="login.html" style="margin-left:7.333333%; font-family:'Comic Sans MS', cursive; font-size:24px; "><i class="iconfont icon-jiudianminsu" style="font-size:3em; color:#F90;"></i> Homestay</a>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                    <ul class="navbar-nav ml-md-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown"><img src="../img/test.jpg" height="35px"  width="35px" style="border-radius:20px;"/>  用户昵称</a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="#">修改资料</a>
                                <a class="dropdown-item" href="#">我的消息</a>
                                <div class="dropdown-divider">
                                </div>
                                <div class="dropdown-header">我是房客</div>
                                <a class="dropdown-item" href="#">我的收藏</a>
                                <a class="dropdown-item" href="#">我的订单</a>
                                <div class="dropdown-divider">
                                </div>
                                <div class="dropdown-header">我是房东</div>
                                <a class="dropdown-item" href="#">我的房源</a>
                                <a class="dropdown-item" href="#">订单管理</a>
                                <a class="dropdown-item" href="#">我的点评</a>
                                <a class="dropdown-item" href="#">收款方式</a>
                            </div>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="#"> <button class="btn btn-default" style="background-color: #F60; color:#FFF;">发布房源</button></a>
                        </li>

                    </ul>
                </div>
            </nav>
            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-2">
                    <div class="d-flex flex-column border mt-4 p-3 bg-white rounded"  style="font-size:12px; color:#000;" id="homestay">
                        <div><img class="d-block w-100 rounded" src="../img/room5.jpg" /></div>
                        <div class="pt-2"><h5>名宿昵称</h5></div>
                        <div class="pt-2"><h6 style="color:#999; font-size:12px;">[双流机场]双流区学府西路常乐小区北三街38号址</h6></div>
                        <hr width="100%">
                        <div><button class="btn btn-default rounded pl-4 pr-4 pt-1 pb-1"  style="background-color:#FC6; color:#FFF; font-weight:bold;">上架</button><button class="btn btn-default rounded pl-4 pr-4 pt-1 pb-1 ml-2"  style="background-color:#999; color:#FFF; font-weight:bold;">删除</button></div>
                    </div>
                </div>
                <div class="col-md-8 p-0">
                    <div class="d-flex flex-column border mt-4 p-3 bg-white rounded"  style="font-size:12px;" id="room">
                        <div class="ml-auto mr-4">
                            <button class="btn btn-default" style="background-color: #69F; color:#FFF;">新增房型</button>
                        </div>
                        <hr width="100%">
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-12">
                    <div class="jumbotron text-center bg-light" style="margin-bottom:0">
                        <p>底部内容</p>
                    </div></div>
            </div>

        </div>
    </div>
</div>
</body>
<script>
    $(function (){
      var homestay=$.parseJSON($.cookie("homestay"));
      $('#homestay div img').attr('src','../img/space/'+$.parseJSON(homestay.picture).封面);
        $('#homestay div h5').text(homestay.h_name);
        $('#homestay div h6').text($.parseJSON(homestay.h_address).addressName);
        $.ajax({
            type: 'post',
            url:"/homestay/getHRoom?hid="+homestay.h_id,
            cache: false,
            processData: false,
            contentType: false,
            success: function (data) {
                var type=["整套出租","独立单间"];
               for(i in data){
                   var norms=$.parseJSON(data[i].r_norms);
                   var facilities=eval('(' + data[i].r_facilities+ ')');

                   switch (data[i].state) {
                       case "已上线":
                           var str="  <div class=\"media border bg-white p-3 m-4 rounded\">\n" +
                               "                                <img src=\"../img/space/"+$.parseJSON(data[i].r_picture).封面+"\" alt=\"John Doe\" class=\"mr-3 mt-3 rounded\" style=\"width:130px; height:90px;\">\n" +
                               "                                <div class=\"media-body bg-white pt-3 d-flex flex-column-reverse\" >\n" +
                               "                                    <div class=\"d-flex mt-2\" style=\"font-size:12px;\">";

                          if(facilities[' 允许做饭']=='1'){
                              str+="<div class=\"pl-0 pr-3\"><i class=\"fas fa-concierge-bell pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                          }else{
                              str+="<div class=\"pl-0 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                          }
                           if(facilities[" 允许携宠"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-dog pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }
                           if(facilities[" 允许聚会"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-glass-cheers pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }
                           str+="<div class=\" ml-auto\"><button class=\"btn btn-default rounded pl-4 pr-4 pt-1 pb-1\"  style=\"background-color:rgb(19, 209, 190); color:#FFF; font-weight:bold;\">下架</button><button class=\"btn btn-default rounded pl-4 pr-4 pt-1 pb-1 ml-2\"  style=\"background-color:#ce8483; color:#FFF; font-weight:bold;\">删除</button></div>\n" +
                               "                                    </div>\n" +
                               "                                    <div class=\"d-flex flex-row mt-3\" style=\"font-size:12px;\">\n" +
                               "                                        <div class=\"pl-0 pr-3  bg-white border-right\"><span class=\"pr-1\" style=\"color:#999;\">类型:</span> "+type[data[i].r_type]+"</div>\n" +
                               "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">卫浴:</span> "+norms.weiyu+"</div>\n" +
                               "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">户型:</span> "+norms.shi+"室"+norms.ting+"厅"+norms.wei+"卫"+norms.chu+"厨</div>\n" +
                               "                                        <div class=\"pl-3 pr-3 \"><span class=\"pr-1\" style=\"color:#CCC;\">面积:</span> "+norms.mianji+"㎡</div>\n" +
                               "                                    </div>\n" +
                               "                                    <div class=\"d-flex\">\n" +
                               "                                        <div><h5>"+data[i].r_name+"</h5></div>\n" +
                               "                                        <div class=\" ml-auto pr-3\" style=\"color:#F60; font-size:24px;\"><span style=\" font-size:8px;\">￥</span>"+data[i].r_price+"</div>\n" +
                               "                                    </div>\n" +
                               "                                </div>";
                                 $('#room').append(str);
                           break;
                       case "已下线":
                           var str="  <div class=\"media border bg-white p-3 m-4 rounded\">\n" +
                               "                                <img src=\"../img/space/"+$.parseJSON(data[i].r_picture).封面+"\" alt=\"John Doe\" class=\"mr-3 mt-3 rounded\" style=\"width:130px; height:90px;\">\n" +
                               "                                <div class=\"media-body bg-white pt-3 d-flex flex-column-reverse\" >\n" +
                               "                                    <div class=\"d-flex mt-2\" style=\"font-size:12px;\">";
                           if(facilities[' 允许做饭']=='1'){
                               str+="<div class=\"pl-0 pr-3\"><i class=\"fas fa-concierge-bell pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                           }else{
                               str+="<div class=\"pl-0 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                           }
                           if(facilities[" 允许携宠"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-dog pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }
                           if(facilities[" 允许聚会"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-glass-cheers pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }
                           str+="<div class=\" ml-auto\"><button class=\"btn btn-default rounded pl-4 pr-4 pt-1 pb-1\"  style=\"background-color:#FC6; color:#FFF; font-weight:bold;\">上架</button><button class=\"btn btn-default rounded pl-4 pr-4 pt-1 pb-1 ml-2\"  style=\"background-color:#ce8483; color:#FFF; font-weight:bold;\">删除</button></div>\n" +
                               "                                    </div>\n" +
                               "                                    <div class=\"d-flex flex-row mt-3\" style=\"font-size:12px;\">\n" +
                               "                                        <div class=\"pl-0 pr-3  bg-white border-right\"><span class=\"pr-1\" style=\"color:#999;\">类型:</span> "+type[data[i].r_type]+"</div>\n" +
                               "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">卫浴:</span> "+norms.weiyu+"</div>\n" +
                           "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">户型:</span> "+norms.shi+"室"+norms.ting+"厅"+norms.wei+"卫"+norms.chu+"厨</div>\n" +
                           "                                        <div class=\"pl-3 pr-3 \"><span class=\"pr-1\" style=\"color:#CCC;\">面积:</span> "+norms.mianji+"㎡</div>\n" +
                           "                                    </div>\n" +
                           "                                    <div class=\"d-flex\">\n" +
                           "                                        <div><h5>"+data[i].r_name+"</h5></div>\n" +
                           "                                        <div class=\" ml-auto pr-3\" style=\"color:#F60; font-size:24px;\"><span style=\" font-size:8px;\">￥</span>"+data[i].r_price+"</div>\n" +
                           "                                    </div>\n" +
                           "                                </div>";
                           $('#room').append(str);
                           break;
                       case "审核中":
                           var str="  <div class=\"media border bg-white p-3 m-4 rounded\">\n" +
                               "                                <img src=\"../img/space/"+$.parseJSON(data[i].r_picture).封面+"\" alt=\"John Doe\" class=\"mr-3 mt-3 rounded\" style=\"width:130px; height:90px;\">\n" +
                               "                                <div class=\"media-body bg-white pt-3 d-flex flex-column-reverse\" >\n" +
                               "                                    <div class=\"d-flex mt-2\" style=\"font-size:12px;\">";
                           if(facilities[' 允许做饭']=='1'){
                               str+="<div class=\"pl-0 pr-3\"><i class=\"fas fa-concierge-bell pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                           }else{
                               str+="<div class=\"pl-0 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                           }
                           if(facilities[" 允许携宠"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-dog pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }
                           if(facilities[" 允许聚会"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-glass-cheers pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }
                           str+="<div class=\" ml-auto\"><button class=\"btn btn-default rounded pl-4 pr-4 pt-1 pb-1 ml-2\"  style=\"background-color:#999; color:#FFF; font-weight:bold;\">审核中</button></div>\n" +
                               "                                    </div>\n" +
                               "                                    <div class=\"d-flex flex-row mt-3\" style=\"font-size:12px;\">\n" +
                               "                                        <div class=\"pl-0 pr-3  bg-white border-right\"><span class=\"pr-1\" style=\"color:#999;\">类型:</span> "+type[data[i].r_type]+"</div>\n" +
                               "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">卫浴:</span> "+norms.weiyu+"</div>\n" +
                           "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">户型:</span> "+norms.shi+"室"+norms.ting+"厅"+norms.wei+"卫"+norms.chu+"厨</div>\n" +
                           "                                        <div class=\"pl-3 pr-3 \"><span class=\"pr-1\" style=\"color:#CCC;\">面积:</span> "+norms.mianji+"㎡</div>\n" +
                           "                                    </div>\n" +
                           "                                    <div class=\"d-flex\">\n" +
                           "                                        <div><h5>"+data[i].r_name+"</h5></div>\n" +
                           "                                        <div class=\" ml-auto pr-3\" style=\"color:#F60; font-size:24px;\"><span style=\" font-size:8px;\">￥</span>"+data[i].r_price+"</div>\n" +
                           "                                    </div>\n" +
                           "                                </div>";
                           $('#room').append(str);
                           break;
                       case "编辑中":
                           var str="  <div class=\"media border bg-white p-3 m-4 rounded\">\n" +
                               "                                <img src=\"../img/space/"+$.parseJSON(data[i].r_picture).封面+"\" alt=\"John Doe\" class=\"mr-3 mt-3 rounded\" style=\"width:130px; height:90px;\">\n" +
                               "                                <div class=\"media-body bg-white pt-3 d-flex flex-column-reverse\" >\n" +
                               "                                    <div class=\"d-flex mt-2\" style=\"font-size:12px;\">";

                           if(facilities[' 允许做饭']=='1'){
                               str+="<div class=\"pl-0 pr-3\"><i class=\"fas fa-concierge-bell pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                           }else{
                               str+="<div class=\"pl-0 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许做饭</div>";
                           }
                           if(facilities[" 允许携宠"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-dog pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许携宠</div>";
                           }
                           if(facilities[" 允许聚会"]=='1'){
                               str+="<div class=\"pl-2 pr-3\"><i class=\"fas fa-glass-cheers pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }else{
                               str+="<div class=\"pl-2 pr-3\"><i class=\"iconfont icon-jinzhi pr-1\" style=\"color:#999;\"></i>允许聚会</div>";
                           }
                           str+="<div class=\" ml-auto\"><button class=\"btn btn-default rounded border-orange pl-4 pr-4 pt-1 pb-1\"  style=\"background-color:#FFF; color:#FC6; font-weight:bold;\">编辑</button><button class=\"btn btn-default rounded pl-4 pr-4 pt-1 pb-1 ml-2\"  style=\"background-color:#ce8483; color:#FFF; font-weight:bold;\">删除</button></div>\n" +
                               "                                    </div>\n" +
                               "                                    <div class=\"d-flex flex-row mt-3\" style=\"font-size:12px;\">\n" +
                               "                                        <div class=\"pl-0 pr-3  bg-white border-right\"><span class=\"pr-1\" style=\"color:#999;\">类型:</span> "+type[data[i].r_type]+"</div>\n" +
                               "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">卫浴:</span> "+norms.weiyu+"</div>\n" +
                           "                                        <div class=\"pl-3 pr-3  border-right\"><span class=\"pr-1\" style=\"color:#999;\">户型:</span> "+norms.shi+"室"+norms.ting+"厅"+norms.wei+"卫"+norms.chu+"厨</div>\n" +
                           "                                        <div class=\"pl-3 pr-3 \"><span class=\"pr-1\" style=\"color:#CCC;\">面积:</span> "+norms.mianji+"㎡</div>\n" +
                           "                                    </div>\n" +
                           "                                    <div class=\"d-flex\">\n" +
                           "                                        <div><h5>"+data[i].r_name+"</h5></div>\n" +
                           "                                        <div class=\" ml-auto pr-3\" style=\"color:#F60; font-size:24px;\"><span style=\" font-size:8px;\">￥</span>"+data[i].r_price+"</div>\n" +
                           "                                    </div>\n" +
                           "                                </div>";
                           $('#room').append(str);
                           break;
                   }

               }
            },
            error: function (XMLHttpRequest, textStatus, error) {
                alert(error);
            }
        });
        function Hcaozuo(method) {
            var caozuo="";
            switch (method) {
                case "上架":
                    break;
                case "下架":
                    break;
                case "删除":
                    break;
            }
            if(caozuo!=""){
                    $.ajax({
                        type: 'post',
                        url: "/homestay/"+caozuo+"?hid=" + homestay.h_id,
                        cache: false,
                        processData: false,
                        contentType: false,
                        success: function (data) {
                        },
                        error: function (XMLHttpRequest, textStatus, error) {
                            alert(error);
                        }
                    });
            }

            function Rcaozuo(method,rid) {
                var caozuo = "";
                switch (method) {
                    case "上架":
                        caozuo = "Rshangjia";
                        break;
                    case "下架":
                        caozuo = "Rxiajia";
                        break;
                    case "删除":
                        caozuo = "Rshanchu";
                        break;
                }
                if (caozuo != "") {
                    $.ajax({
                        type: 'post',
                        url: "/homestay/"+caozuo+"?rid=" + rid,
                        cache: false,
                        processData: false,
                        contentType: false,
                        success: function (data) {

                        },
                        error: function (XMLHttpRequest, textStatus, error) {
                            alert(error);
                        }
                    });
                }
            }
        }




    })

</script>
</html>